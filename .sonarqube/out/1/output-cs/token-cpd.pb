Éé
PC:\HeroSystem\walletService\WalletService.Utility\Extensions\CommonExtensions.cs
	namespace 	
WalletService
 
. 
Utility 
.  

Extensions  *
;* +
public 
static 
class 
CommonExtensions $
{ 
public 

static 
int 
GetWeekOfYear #
(# $
this$ (
DateTime) 1
source2 8
)8 9
{ 
var 
time 
= 
source 
; 
var 
day 
= 
CultureInfo 
. 
InvariantCulture .
.. /
Calendar/ 7
.7 8
GetDayOfWeek8 D
(D E
timeE I
)I J
;J K
if 

( 
day 
is 
>= 
	DayOfWeek 
.  
Monday  &
and' *
<=+ -
	DayOfWeek. 7
.7 8
	Wednesday8 A
)A B
time 
= 
time 
. 
AddDays 
(  
$num  !
)! "
;" #
return 
CultureInfo 
. 
InvariantCulture +
.+ ,
Calendar, 4
.4 5
GetWeekOfYear5 B
(B C
timeC G
,G H
CalendarWeekRuleI Y
.Y Z
FirstFourDayWeekZ j
,j k
	DayOfWeek 
. 
Monday 
) 
; 
}   
public&& 

static&& 
string&& 
?&& 
GetIpAddress&& &
(&&& '
this&&' +
	IPAddress&&, 5
source&&6 <
)&&< =
{'' 
var(( 
ipStr(( 
=(( 
source(( 
.(( 
ToString(( #
(((# $
)(($ %
;((% &
var)) 
splitIp)) 
=)) 
ipStr)) 
.)) 
Split)) !
())! "
$char))" %
)))% &
;))& '
if++ 

(++ 
splitIp++ 
.++ 
Length++ 
>++ 
$num++ 
)++ 
return++  &
source++' -
.++- .
ToString++. 6
(++6 7
)++7 8
;++8 9
return-- 
splitIp-- 
.-- 
LastOrDefault-- $
(--$ %
)--% &
;--& '
}.. 
public22 

static22 

IQueryable22 
<22 
T22 
>22 
WhereIf22  '
<22' (
T22( )
>22) *
(22* +
this22+ /

IQueryable220 :
<22: ;
T22; <
>22< =
query22> C
,22C D
bool22E I
	condition22J S
,22S T

Expression33 
<33 
Func33 
<33 
T33 
,33 
bool33 
>33  
>33  !
	predicate33" +
)33+ ,
{44 
return55 
	condition55 
?55 
query55  
.55  !
Where55! &
(55& '
	predicate55' 0
)550 1
:552 3
query554 9
;559 :
}66 
public88 

static88 
bool88 
IsValidJson88 "
(88" #
this88# '
string88( .
value88/ 4
)884 5
{99 
try:: 
{;; 	
JsonDocument<< 
.<< 
Parse<< 
(<< 
value<< $
)<<$ %
;<<% &
}== 	
catch>> 
{?? 	
return@@ 
false@@ 
;@@ 
}AA 	
returnCC 
trueCC 
;CC 
}DD 
publicFF 

staticFF 
TFF 
?FF 
ToJsonObjectFF !
<FF! "
TFF" #
>FF# $
(FF$ %
thisFF% )
stringFF* 0
sourceFF1 7
)FF7 8
=>GG 

JsonSerializerGG 
.GG 
DeserializeGG %
<GG% &
TGG& '
>GG' (
(GG( )
sourceGG) /
)GG/ 0
;GG0 1
publicII 

staticII 
stringII 
ToJsonStringII %
(II% &
thisII& *
objectII+ 1
sourceII2 8
)II8 9
=>JJ 

JsonSerializerJJ 
.JJ 
	SerializeJJ #
(JJ# $
sourceJJ$ *
)JJ* +
;JJ+ ,
publicLL 

staticLL 
stringLL 
ToJsonStringLL %
(LL% &
thisLL& *
objectLL+ 1
sourceLL2 8
,LL8 9!
JsonSerializerOptionsLL: O"
jsonSerializerSettingsLLP f
)LLf g
=>MM 

JsonSerializerMM 
.MM 
	SerializeMM #
(MM# $
sourceMM$ *
,MM* +"
jsonSerializerSettingsMM, B
)MMB C
;MMC D
publicOO 

staticOO 
IEnumerableOO 
<OO 
TResultOO %
>OO% &
ZipThreeOO' /
<OO/ 0
T1OO0 2
,OO2 3
T2OO4 6
,OO6 7
T3OO8 :
,OO: ;
TResultOO< C
>OOC D
(OOD E
thisPP 
IEnumerablePP 
<PP 
T1PP 
>PP 
sourcePP #
,PP# $
IEnumerableQQ 
<QQ 
T2QQ 
>QQ 
secondQQ 
,QQ 
IEnumerableRR 
<RR 
T3RR 
>RR 
thirdRR 
,RR 
FuncSS 
<SS 
T1SS 
,SS 
T2SS 
,SS 
T3SS 
,SS 
TResultSS  
>SS  !
funcSS" &
)SS& '
{TT 
usingUU 
varUU 
e1UU 
=UU 
sourceUU 
.UU 
GetEnumeratorUU +
(UU+ ,
)UU, -
;UU- .
usingVV 
varVV 
e2VV 
=VV 
secondVV 
.VV 
GetEnumeratorVV +
(VV+ ,
)VV, -
;VV- .
usingWW 
varWW 
e3WW 
=WW 
thirdWW 
.WW 
GetEnumeratorWW *
(WW* +
)WW+ ,
;WW, -
whileYY 
(YY 
e1YY 
.YY 
MoveNextYY 
(YY 
)YY 
&&YY 
e2YY  "
.YY" #
MoveNextYY# +
(YY+ ,
)YY, -
&&YY. 0
e3YY1 3
.YY3 4
MoveNextYY4 <
(YY< =
)YY= >
)YY> ?
yieldZZ 
returnZZ 
funcZZ 
(ZZ 
e1ZZ  
.ZZ  !
CurrentZZ! (
,ZZ( )
e2ZZ* ,
.ZZ, -
CurrentZZ- 4
,ZZ4 5
e3ZZ6 8
.ZZ8 9
CurrentZZ9 @
)ZZ@ A
;ZZA B
}[[ 
public^^ 

static^^ 
string^^  
StringUpperNormalize^^ -
(^^- .
this^^. 2
string^^3 9
text^^: >
)^^> ?
=>__ 

text__ 
.__ 
ToUpper__ 
(__ 
)__ 
.__ 
Replace__ !
(__! "
$str__" %
,__% &
$str__' *
)__* +
.__+ ,
Replace__, 3
(__3 4
$str__4 7
,__7 8
$str__9 <
)__< =
.__= >
Replace__> E
(__E F
$str__F I
,__I J
$str__K N
)__N O
.__O P
Replace__P W
(__W X
$str__X [
,__[ \
$str__] `
)__` a
;__a b
publicaa 

staticaa 
stringaa 
ToStringFormattedaa *
(aa* +
thisaa+ /
IReadOnlyDictionaryaa0 C
<aaC D
stringaaD J
,aaJ K
stringaaL R
>aaR S
sourceaaT Z
)aaZ [
=>bb 

stringbb 
.bb 
Joinbb 
(bb 
$strbb 
,bb 
sourcebb "
.bb" #
Selectbb# )
(bb) *
ssbb* ,
=>bb- /
$"bb0 2
{bb2 3
ssbb3 5
.bb5 6
Keybb6 9
}bb9 :
$strbb: ;
{bb; <
ssbb< >
.bb> ?
Valuebb? D
}bbD E
"bbE F
)bbF G
)bbG H
;bbH I
publicdd 

staticdd 
stringdd 
?dd 
GetPropertyValuedd *
(dd* +
thisdd+ /
objectdd0 6
valuedd7 <
,dd< =
stringdd> D
propertyNameddE Q
)ddQ R
{ee 
varff 
modelDictionaryff 
=ff 
valueff #
.ff# $
ToJsonStringff$ 0
(ff0 1
)ff1 2
.ff2 3
ToJsonObjectff3 ?
<ff? @
IDictionaryff@ K
<ffK L
stringffL R
,ffR S
stringffT Z
>ffZ [
>ff[ \
(ff\ ]
)ff] ^
;ff^ _
vargg 
propertyHasValuegg 
=gg 
falsegg $
;gg$ %
stringhh 
?hh 
propertyValuehh 
=hh 
nullhh  $
;hh$ %
ifii 

(ii 
modelDictionaryii 
isii 
notii "
nullii# '
&&ii( *
modelDictionaryii+ :
.ii: ;
ContainsKeyii; F
(iiF G
propertyNameiiG S
)iiS T
)iiT U
propertyHasValuejj 
=jj 
modelDictionaryjj .
.jj. /
TryGetValuejj/ :
(jj: ;
propertyNamejj; G
,jjG H
outjjI L
propertyValuejjM Z
)jjZ [
;jj[ \
returnll 
propertyHasValuell 
?ll  !
propertyValuell" /
:ll0 1
nullll2 6
;ll6 7
}mm 
publicoo 

staticoo 
booloo 
IsValidEmailoo #
(oo# $
thisoo$ (
stringoo) /
textoo0 4
)oo4 5
{pp 
varqq 

emailRegexqq 
=qq 
newqq 
Regexqq "
(qq" #
$strqq# N
)qqN O
;qqO P
varrr 
matchrr 
=rr 

emailRegexrr 
.rr 
Matchrr $
(rr$ %
textrr% )
)rr) *
;rr* +
returntt 
matchtt 
.tt 
Successtt 
;tt 
}uu 
publicww 

staticww 
stringww 
GenerateOrderNumberww ,
(ww, -
intww- 0
idww1 3
)ww3 4
{xx 
DateTimeyy 
dateyy 
=yy 
DateTimeyy  
.yy  !
Nowyy! $
;yy$ %
string{{ 

formatDate{{ 
={{ 
date{{  
.{{  !
ToString{{! )
({{) *
$str{{* 8
){{8 9
;{{9 :
string|| 
orderNumber|| 
=|| 

formatDate|| '
+||( )
id||* ,
.||, -
ToString||- 5
(||5 6
)||6 7
;||7 8
return~~ 
orderNumber~~ 
;~~ 
} 
public
ÅÅ 

static
ÅÅ 
	DataTable
ÅÅ  
ConvertToDataTable
ÅÅ .
<
ÅÅ. /
T
ÅÅ/ 0
>
ÅÅ0 1
(
ÅÅ1 2
ICollection
ÅÅ2 =
<
ÅÅ= >
T
ÅÅ> ?
>
ÅÅ? @

collection
ÅÅA K
)
ÅÅK L
{
ÇÇ 
	DataTable
ÉÉ 
	dataTable
ÉÉ 
=
ÉÉ 
new
ÉÉ !
	DataTable
ÉÉ" +
(
ÉÉ+ ,
)
ÉÉ, -
;
ÉÉ- .
PropertyInfo
ÑÑ 
[
ÑÑ 
]
ÑÑ 

properties
ÑÑ !
=
ÑÑ" #
typeof
ÑÑ$ *
(
ÑÑ* +
T
ÑÑ+ ,
)
ÑÑ, -
.
ÑÑ- .
GetProperties
ÑÑ. ;
(
ÑÑ; <
)
ÑÑ< =
;
ÑÑ= >
foreach
ÖÖ 
(
ÖÖ 
PropertyInfo
ÖÖ 
property
ÖÖ &
in
ÖÖ' )

properties
ÖÖ* 4
)
ÖÖ4 5
{
ÜÜ 	
	dataTable
áá 
.
áá 
Columns
áá 
.
áá 
Add
áá !
(
áá! "
property
áá" *
.
áá* +
Name
áá+ /
,
áá/ 0
Nullable
àà 
.
àà 
GetUnderlyingType
àà *
(
àà* +
property
àà+ 3
.
àà3 4
PropertyType
àà4 @
)
àà@ A
??
ààB D
property
ààE M
.
ààM N
PropertyType
ààN Z
)
ààZ [
;
àà[ \
}
ââ 	
foreach
ãã 
(
ãã 
T
ãã 
item
ãã 
in
ãã 

collection
ãã %
)
ãã% &
{
åå 	
DataRow
çç 
dataRow
çç 
=
çç 
	dataTable
çç '
.
çç' (
NewRow
çç( .
(
çç. /
)
çç/ 0
;
çç0 1
foreach
éé 
(
éé 
PropertyInfo
éé !
property
éé" *
in
éé+ -

properties
éé. 8
)
éé8 9
{
èè 
dataRow
êê 
[
êê 
property
êê  
.
êê  !
Name
êê! %
]
êê% &
=
êê' (
property
êê) 1
.
êê1 2
GetValue
êê2 :
(
êê: ;
item
êê; ?
)
êê? @
??
êêA C
DBNull
êêD J
.
êêJ K
Value
êêK P
;
êêP Q
}
ëë 
	dataTable
ìì 
.
ìì 
Rows
ìì 
.
ìì 
Add
ìì 
(
ìì 
dataRow
ìì &
)
ìì& '
;
ìì' (
}
îî 	
return
ññ 
	dataTable
ññ 
;
ññ 
}
óó 
public
ôô 

static
ôô 
T
ôô 
DecryptObject
ôô !
<
ôô! "
T
ôô" #
>
ôô# $
(
ôô$ %
string
ôô% +
encryptedData
ôô, 9
)
ôô9 :
{
öö 
string
õõ 
keyEncrypted
õõ 
=
õõ 
$str
õõ `
;
õõ` a
string
úú 
iv
úú 
=
úú 
$str
úú 6
;
úú6 7
byte
ûû 
[
ûû 
]
ûû 
keyBytes
ûû 
=
ûû 
StringToByteArray
ûû +
(
ûû+ ,
keyEncrypted
ûû, 8
)
ûû8 9
;
ûû9 :
byte
üü 
[
üü 
]
üü 
ivBytes
üü 
=
üü 
StringToByteArray
üü *
(
üü* +
iv
üü+ -
)
üü- .
;
üü. /
using
°° 
Aes
°° 
aes
°° 
=
°° 
Aes
°° 
.
°° 
Create
°° "
(
°°" #
)
°°# $
;
°°$ %
aes
¢¢ 
.
¢¢ 
Mode
¢¢ 
=
¢¢ 

CipherMode
¢¢ 
.
¢¢ 
CBC
¢¢ !
;
¢¢! "
aes
££ 
.
££ 
Key
££ 
=
££ 
keyBytes
££ 
;
££ 
aes
§§ 
.
§§ 
IV
§§ 
=
§§ 
ivBytes
§§ 
;
§§ 
aes
•• 
.
•• 
Padding
•• 
=
•• 
PaddingMode
•• !
.
••! "
PKCS7
••" '
;
••' (
byte
ßß 
[
ßß 
]
ßß 
encryptedBytes
ßß 
=
ßß 
Convert
ßß  '
.
ßß' (
FromBase64String
ßß( 8
(
ßß8 9
encryptedData
ßß9 F
)
ßßF G
;
ßßG H
using
©© 
MemoryStream
©© 
memoryStream
©© '
=
©©( )
new
©©* -
MemoryStream
©©. :
(
©©: ;
)
©©; <
;
©©< =
using
™™ 
CryptoStream
™™ 
cryptoStream
™™ '
=
™™( )
new
™™* -
CryptoStream
™™. :
(
™™: ;
memoryStream
™™; G
,
™™G H
aes
™™I L
.
™™L M
CreateDecryptor
™™M \
(
™™\ ]
)
™™] ^
,
™™^ _
CryptoStreamMode
™™` p
.
™™p q
Write
™™q v
)
™™v w
;
™™w x
cryptoStream
¨¨ 
.
¨¨ 
Write
¨¨ 
(
¨¨ 
encryptedBytes
¨¨ )
,
¨¨) *
$num
¨¨+ ,
,
¨¨, -
encryptedBytes
¨¨. <
.
¨¨< =
Length
¨¨= C
)
¨¨C D
;
¨¨D E
cryptoStream
≠≠ 
.
≠≠ 
FlushFinalBlock
≠≠ $
(
≠≠$ %
)
≠≠% &
;
≠≠& '
byte
ØØ 
[
ØØ 
]
ØØ 
decryptedBytes
ØØ 
=
ØØ 
memoryStream
ØØ  ,
.
ØØ, -
ToArray
ØØ- 4
(
ØØ4 5
)
ØØ5 6
;
ØØ6 7
string
∞∞ 
decryptedData
∞∞ 
=
∞∞ 
Encoding
∞∞ '
.
∞∞' (
UTF8
∞∞( ,
.
∞∞, -
	GetString
∞∞- 6
(
∞∞6 7
decryptedBytes
∞∞7 E
)
∞∞E F
;
∞∞F G
var
≤≤ 
objectDeserialize
≤≤ 
=
≤≤ 
decryptedData
≤≤  -
.
≤≤- .
ToJsonObject
≤≤. :
<
≤≤: ;
T
≤≤; <
>
≤≤< =
(
≤≤= >
)
≤≤> ?
;
≤≤? @
return
¥¥ 
objectDeserialize
¥¥  
!
¥¥  !
;
¥¥! "
}
µµ 
public
∑∑ 

static
∑∑ 
byte
∑∑ 
[
∑∑ 
]
∑∑ 
StringToByteArray
∑∑ *
(
∑∑* +
String
∑∑+ 1
hex
∑∑2 5
)
∑∑5 6
{
∏∏ 
int
ππ 
numberChars
ππ 
=
ππ 
hex
ππ 
.
ππ 
Length
ππ $
;
ππ$ %
byte
∫∫ 
[
∫∫ 
]
∫∫ 
bytes
∫∫ 
=
∫∫ 
new
∫∫ 
byte
∫∫ 
[
∫∫  
numberChars
∫∫  +
/
∫∫, -
$num
∫∫. /
]
∫∫/ 0
;
∫∫0 1
for
ªª 
(
ªª 
int
ªª 
i
ªª 
=
ªª 
$num
ªª 
;
ªª 
i
ªª 
<
ªª 
numberChars
ªª '
;
ªª' (
i
ªª) *
+=
ªª+ -
$num
ªª. /
)
ªª/ 0
bytes
ºº 
[
ºº 
i
ºº 
/
ºº 
$num
ºº 
]
ºº 
=
ºº 
Convert
ºº "
.
ºº" #
ToByte
ºº# )
(
ºº) *
hex
ºº* -
.
ºº- .
	Substring
ºº. 7
(
ºº7 8
i
ºº8 9
,
ºº9 :
$num
ºº; <
)
ºº< =
,
ºº= >
$num
ºº? A
)
ººA B
;
ººB C
return
ΩΩ 
bytes
ΩΩ 
;
ΩΩ 
}
ææ 
private
¿¿ 
static
¿¿ 
DateTime
¿¿  
CalculateStartDate
¿¿ .
(
¿¿. /
DateTime
¿¿/ 7
purchaseDate
¿¿8 D
,
¿¿D E
TimeZoneInfo
¿¿F R
timeZone
¿¿S [
)
¿¿[ \
{
¡¡ 
DateTime
¬¬ 
	startDate
¬¬ 
;
¬¬ 
var
√√ $
purchaseDateInTimeZone
√√ "
=
√√# $
TimeZoneInfo
√√% 1
.
√√1 2
ConvertTime
√√2 =
(
√√= >
purchaseDate
√√> J
,
√√J K
timeZone
√√L T
)
√√T U
;
√√U V
switch
≈≈ 
(
≈≈ $
purchaseDateInTimeZone
≈≈ &
.
≈≈& '
	DayOfWeek
≈≈' 0
)
≈≈0 1
{
∆∆ 	
case
«« 
	DayOfWeek
«« 
.
«« 
Monday
«« !
:
««! "
	startDate
»» 
=
»» $
purchaseDateInTimeZone
»» 2
.
»»2 3
AddDays
»»3 :
(
»»: ;
$num
»»; <
)
»»< =
;
»»= >
break
…… 
;
…… 
case
   
	DayOfWeek
   
.
   
Tuesday
   "
:
  " #
	startDate
ÀÀ 
=
ÀÀ $
purchaseDateInTimeZone
ÀÀ 2
.
ÀÀ2 3
AddDays
ÀÀ3 :
(
ÀÀ: ;
$num
ÀÀ; <
)
ÀÀ< =
;
ÀÀ= >
break
ÃÃ 
;
ÃÃ 
case
ÕÕ 
	DayOfWeek
ÕÕ 
.
ÕÕ 
	Wednesday
ÕÕ $
:
ÕÕ$ %
	startDate
ŒŒ 
=
ŒŒ $
purchaseDateInTimeZone
ŒŒ 2
.
ŒŒ2 3
AddDays
ŒŒ3 :
(
ŒŒ: ;
$num
ŒŒ; <
)
ŒŒ< =
;
ŒŒ= >
break
œœ 
;
œœ 
case
–– 
	DayOfWeek
–– 
.
–– 
Thursday
–– #
:
––# $
	startDate
—— 
=
—— $
purchaseDateInTimeZone
—— 2
.
——2 3
AddDays
——3 :
(
——: ;
$num
——; <
)
——< =
;
——= >
break
““ 
;
““ 
case
”” 
	DayOfWeek
”” 
.
”” 
Friday
”” !
:
””! "
	startDate
‘‘ 
=
‘‘ $
purchaseDateInTimeZone
‘‘ 2
.
‘‘2 3
AddDays
‘‘3 :
(
‘‘: ;
$num
‘‘; <
)
‘‘< =
;
‘‘= >
break
’’ 
;
’’ 
case
÷÷ 
	DayOfWeek
÷÷ 
.
÷÷ 
Saturday
÷÷ #
:
÷÷# $
	startDate
◊◊ 
=
◊◊ $
purchaseDateInTimeZone
◊◊ 2
.
◊◊2 3
AddDays
◊◊3 :
(
◊◊: ;
$num
◊◊; <
)
◊◊< =
;
◊◊= >
break
ÿÿ 
;
ÿÿ 
case
ŸŸ 
	DayOfWeek
ŸŸ 
.
ŸŸ 
Sunday
ŸŸ !
:
ŸŸ! "
if
⁄⁄ 
(
⁄⁄ $
purchaseDateInTimeZone
⁄⁄ *
.
⁄⁄* +
Hour
⁄⁄+ /
>=
⁄⁄0 2
$num
⁄⁄3 5
)
⁄⁄5 6
{
€€ 
	startDate
‹‹ 
=
‹‹ $
purchaseDateInTimeZone
‹‹  6
.
‹‹6 7
AddDays
‹‹7 >
(
‹‹> ?
$num
‹‹? @
)
‹‹@ A
;
‹‹A B
}
›› 
else
ﬁﬁ 
{
ﬂﬂ 
	startDate
‡‡ 
=
‡‡ $
purchaseDateInTimeZone
‡‡  6
.
‡‡6 7
AddDays
‡‡7 >
(
‡‡> ?
$num
‡‡? @
)
‡‡@ A
;
‡‡A B
}
·· 
break
„„ 
;
„„ 
default
‰‰ 
:
‰‰ 
throw
ÂÂ 
new
ÂÂ '
InvalidOperationException
ÂÂ 3
(
ÂÂ3 4
$str
ÂÂ4 N
)
ÂÂN O
;
ÂÂO P
}
ÊÊ 	
return
ËË 
	startDate
ËË 
;
ËË 
}
ÈÈ 
public
ÎÎ 

static
ÎÎ 
(
ÎÎ 
DateTime
ÎÎ 
	StartDate
ÎÎ %
,
ÎÎ% &
DateTime
ÎÎ' /
EndDate
ÎÎ0 7
)
ÎÎ7 8(
CalculateWeeklyCourseDates
ÎÎ9 S
(
ÎÎS T
DateTime
ÎÎT \
purchaseDate
ÎÎ] i
)
ÎÎi j
{
ÏÏ 
var
ÌÌ 
costaRicaTimeZone
ÌÌ 
=
ÌÌ 
TimeZoneInfo
ÌÌ  ,
.
ÌÌ, -$
FindSystemTimeZoneById
ÌÌ- C
(
ÌÌC D
$str
ÌÌD c
)
ÌÌc d
;
ÌÌd e
var
ÓÓ 
	startDate
ÓÓ 
=
ÓÓ  
CalculateStartDate
ÓÓ *
(
ÓÓ* +
purchaseDate
ÓÓ+ 7
,
ÓÓ7 8
costaRicaTimeZone
ÓÓ9 J
)
ÓÓJ K
;
ÓÓK L
var
ÔÔ 
endDate
ÔÔ 
=
ÔÔ 
	startDate
ÔÔ 
.
ÔÔ  
AddDays
ÔÔ  '
(
ÔÔ' (
$num
ÔÔ( )
)
ÔÔ) *
;
ÔÔ* +
return
 
(
 
	startDate
 
,
 
endDate
 "
)
" #
;
# $
}
ÒÒ 
public
ÛÛ 

static
ÛÛ 
(
ÛÛ 
DateTime
ÛÛ 
	StartDate
ÛÛ %
,
ÛÛ% &
DateTime
ÛÛ' /
EndDate
ÛÛ0 7
)
ÛÛ7 8)
CalculateMonthlyCourseDates
ÛÛ9 T
(
ÛÛT U
DateTime
ÛÛU ]
purchaseDate
ÛÛ^ j
)
ÛÛj k
{
ÙÙ 
var
ıı 
costaRicaTimeZone
ıı 
=
ıı 
TimeZoneInfo
ıı  ,
.
ıı, -$
FindSystemTimeZoneById
ıı- C
(
ııC D
$str
ııD c
)
ııc d
;
ııd e
var
ˆˆ 
	startDate
ˆˆ 
=
ˆˆ  
CalculateStartDate
ˆˆ *
(
ˆˆ* +
purchaseDate
ˆˆ+ 7
,
ˆˆ7 8
costaRicaTimeZone
ˆˆ9 J
)
ˆˆJ K
;
ˆˆK L
var
˜˜ 
endDate
˜˜ 
=
˜˜ 
	startDate
˜˜ 
.
˜˜  
AddDays
˜˜  '
(
˜˜' (
$num
˜˜( *
)
˜˜* +
;
˜˜+ ,
return
¯¯ 
(
¯¯ 
	startDate
¯¯ 
,
¯¯ 
endDate
¯¯ "
)
¯¯" #
;
¯¯# $
}
˘˘ 
public
˚˚ 

static
˚˚ 
DateTime
˚˚ !
CalculateNextMonday
˚˚ .
(
˚˚. /
DateTime
˚˚/ 7
currentDate
˚˚8 C
)
˚˚C D
{
¸¸ 
int
˝˝ 
daysUntilMonday
˝˝ 
=
˝˝ 
(
˝˝ 
(
˝˝  
int
˝˝  #
)
˝˝# $
	DayOfWeek
˝˝$ -
.
˝˝- .
Monday
˝˝. 4
-
˝˝5 6
(
˝˝7 8
int
˝˝8 ;
)
˝˝; <
currentDate
˝˝< G
.
˝˝G H
	DayOfWeek
˝˝H Q
+
˝˝R S
$num
˝˝T U
)
˝˝U V
%
˝˝W X
$num
˝˝Y Z
;
˝˝Z [
if
˛˛ 

(
˛˛ 
daysUntilMonday
˛˛ 
==
˛˛ 
$num
˛˛  
)
˛˛  !
daysUntilMonday
ˇˇ 
=
ˇˇ 
$num
ˇˇ 
;
ˇˇ  
return
ÄÄ 
currentDate
ÄÄ 
.
ÄÄ 
AddDays
ÄÄ "
(
ÄÄ" #
daysUntilMonday
ÄÄ# 2
)
ÄÄ2 3
;
ÄÄ3 4
}
ÅÅ 
public
ÉÉ 

static
ÉÉ 
async
ÉÉ 
Task
ÉÉ 
<
ÉÉ 

Dictionary
ÉÉ '
<
ÉÉ' (
string
ÉÉ( .
,
ÉÉ. /
byte
ÉÉ0 4
[
ÉÉ4 5
]
ÉÉ5 6
>
ÉÉ6 7
>
ÉÉ7 8+
GetPdfContentFromProductNames
ÉÉ9 V
(
ÉÉV W
string
ÉÉW ]
[
ÉÉ] ^
]
ÉÉ^ _
productNames
ÉÉ` l
)
ÉÉl m
{
ÑÑ 

Dictionary
ÖÖ 
<
ÖÖ 
string
ÖÖ 
,
ÖÖ 
byte
ÖÖ 
[
ÖÖ  
]
ÖÖ  !
>
ÖÖ! "
pdfContents
ÖÖ# .
=
ÖÖ/ 0
new
ÖÖ1 4

Dictionary
ÖÖ5 ?
<
ÖÖ? @
string
ÖÖ@ F
,
ÖÖF G
byte
ÖÖH L
[
ÖÖL M
]
ÖÖM N
>
ÖÖN O
(
ÖÖO P
)
ÖÖP Q
;
ÖÖQ R
var
áá 
workingDirectory
áá 
=
áá 
Path
áá #
.
áá# $
GetDirectoryName
áá$ 4
(
áá4 5
Assembly
áá5 =
.
áá= >"
GetExecutingAssembly
áá> R
(
ááR S
)
ááS T
.
ááT U
Location
ááU ]
)
áá] ^
;
áá^ _
var
àà 
	separator
àà 
=
àà 
Path
àà 
.
àà $
DirectorySeparatorChar
àà 3
;
àà3 4
foreach
ää 
(
ää 
var
ää 
productName
ää  
in
ää! #
productNames
ää$ 0
)
ää0 1
{
ãã 	
if
åå 
(
åå 
ProductPdfMapping
åå !
.
åå! "
ProductToPdfMap
åå" 1
.
åå1 2
TryGetValue
åå2 =
(
åå= >
productName
åå> I
,
ååI J
out
ååK N
var
ååO R
pdfFileName
ååS ^
)
åå^ _
)
åå_ `
{
çç 
var
éé 
pdfName
éé 
=
éé 
$"
éé  
{
éé  !
pdfFileName
éé! ,
}
éé, -
$str
éé- 1
"
éé1 2
;
éé2 3
var
èè 
path
èè 
=
èè 
$"
èè 
{
èè 
workingDirectory
èè .
}
èè. /
{
èè/ 0
	separator
èè0 9
}
èè9 :
$str
èè: @
{
èè@ A
	separator
èèA J
}
èèJ K
$str
èèK T
{
èèT U
	separator
èèU ^
}
èè^ _
{
èè_ `
pdfName
èè` g
}
èèg h
"
èèh i
;
èèi j
if
ëë 
(
ëë 
File
ëë 
.
ëë 
Exists
ëë 
(
ëë  
path
ëë  $
)
ëë$ %
)
ëë% &
{
íí 
var
ìì 

pdfContent
ìì "
=
ìì# $
await
ìì% *
File
ìì+ /
.
ìì/ 0
ReadAllBytesAsync
ìì0 A
(
ììA B
path
ììB F
)
ììF G
;
ììG H
pdfContents
îî 
[
îî  
pdfName
îî  '
]
îî' (
=
îî) *

pdfContent
îî+ 5
;
îî5 6
}
ïï 
else
ññ 
{
óó 
Console
òò 
.
òò 
	WriteLine
òò %
(
òò% &
$"
òò& (
$str
òò( 2
{
òò2 3
pdfName
òò3 :
}
òò: ;
$str
òò; J
{
òòJ K
productName
òòK V
}
òòV W
$str
òòW h
"
òòh i
)
òòi j
;
òòj k
}
ôô 
}
öö 
else
õõ 
{
úú 
Console
ùù 
.
ùù 
	WriteLine
ùù !
(
ùù! "
$"
ùù" $
$str
ùù$ K
{
ùùK L
productName
ùùL W
}
ùùW X
$str
ùùX Z
"
ùùZ [
)
ùù[ \
;
ùù\ ]
}
ûû 
}
üü 	
return
°° 
pdfContents
°° 
;
°° 
}
¢¢ 
public
§§ 

static
§§ 
uint
§§ 
Crc32
§§ 
(
§§ 
string
§§ #
input
§§$ )
)
§§) *
{
•• 
var
¶¶ 
table
¶¶ 
=
¶¶ 
new
¶¶ 
uint
¶¶ 
[
¶¶ 
$num
¶¶  
]
¶¶  !
;
¶¶! "
for
ßß 
(
ßß 
uint
ßß 
i
ßß 
=
ßß 
$num
ßß 
;
ßß 
i
ßß 
<
ßß 
$num
ßß  
;
ßß  !
i
ßß" #
++
ßß# %
)
ßß% &
{
®® 	
var
©© 
temp
©© 
=
©© 
i
©© 
;
©© 
for
™™ 
(
™™ 
var
™™ 
j
™™ 
=
™™ 
$num
™™ 
;
™™ 
j
™™ 
<
™™ 
$num
™™  !
;
™™! "
j
™™# $
++
™™$ &
)
™™& '
{
´´ 
if
¨¨ 
(
¨¨ 
(
¨¨ 
temp
¨¨ 
&
¨¨ 
$num
¨¨ 
)
¨¨ 
==
¨¨ !
$num
¨¨" #
)
¨¨# $
{
≠≠ 
temp
ÆÆ 
=
ÆÆ 
(
ÆÆ 
temp
ÆÆ  
>>
ÆÆ! #
$num
ÆÆ$ %
)
ÆÆ% &
^
ÆÆ' (
$num
ÆÆ) 3
;
ÆÆ3 4
}
ØØ 
else
∞∞ 
{
±± 
temp
≤≤ 
>>=
≤≤ 
$num
≤≤ 
;
≤≤ 
}
≥≥ 
}
¥¥ 
table
∂∂ 
[
∂∂ 
i
∂∂ 
]
∂∂ 
=
∂∂ 
temp
∂∂ 
;
∂∂ 
}
∑∑ 	
var
ππ 
bytes
ππ 
=
ππ 
Encoding
ππ 
.
ππ 
UTF8
ππ !
.
ππ! "
GetBytes
ππ" *
(
ππ* +
input
ππ+ 0
)
ππ0 1
;
ππ1 2
uint
∫∫ 
crc
∫∫ 
=
∫∫ 
$num
∫∫ 
;
∫∫ 
foreach
ªª 
(
ªª 
var
ªª 
b
ªª 
in
ªª 
bytes
ªª 
)
ªª  
{
ºº 	
var
ΩΩ 
index
ΩΩ 
=
ΩΩ 
(
ΩΩ 
byte
ΩΩ 
)
ΩΩ 
(
ΩΩ 
(
ΩΩ  
crc
ΩΩ  #
&
ΩΩ$ %
$num
ΩΩ& *
)
ΩΩ* +
^
ΩΩ, -
b
ΩΩ. /
)
ΩΩ/ 0
;
ΩΩ0 1
crc
ææ 
=
ææ 
(
ææ 
crc
ææ 
>>
ææ 
$num
ææ 
)
ææ 
^
ææ 
table
ææ $
[
ææ$ %
index
ææ% *
]
ææ* +
;
ææ+ ,
}
øø 	
return
¡¡ 
~
¡¡ 
crc
¡¡ 
;
¡¡ 
}
¬¬ 
public
ƒƒ 

static
ƒƒ 
int
ƒƒ 
GenerateUniqueId
ƒƒ &
(
ƒƒ& '
int
ƒƒ' *
affiliateId
ƒƒ+ 6
)
ƒƒ6 7
{
≈≈ 
if
∆∆ 

(
∆∆ 
affiliateId
∆∆ 
<
∆∆ 
$num
∆∆ 
)
∆∆ 
throw
«« 
new
«« )
ArgumentOutOfRangeException
«« 1
(
««1 2
nameof
««2 8
(
««8 9
affiliateId
««9 D
)
««D E
,
««E F
$str
««G k
)
««k l
;
««l m
string
…… 
seed
…… 
=
…… 
$"
…… 
{
…… 
DateTime
…… !
.
……! "
UtcNow
……" (
:
……( )
$str
……) 7
}
……7 8
{
……8 9
affiliateId
……9 D
}
……D E
"
……E F
;
……F G
using
ÀÀ 
(
ÀÀ 
var
ÀÀ 
sha1
ÀÀ 
=
ÀÀ 
System
ÀÀ  
.
ÀÀ  !
Security
ÀÀ! )
.
ÀÀ) *
Cryptography
ÀÀ* 6
.
ÀÀ6 7
SHA1
ÀÀ7 ;
.
ÀÀ; <
Create
ÀÀ< B
(
ÀÀB C
)
ÀÀC D
)
ÀÀD E
{
ÃÃ 	
byte
ÕÕ 
[
ÕÕ 
]
ÕÕ 
hash
ÕÕ 
=
ÕÕ 
sha1
ÕÕ 
.
ÕÕ 
ComputeHash
ÕÕ *
(
ÕÕ* +
System
ÕÕ+ 1
.
ÕÕ1 2
Text
ÕÕ2 6
.
ÕÕ6 7
Encoding
ÕÕ7 ?
.
ÕÕ? @
UTF8
ÕÕ@ D
.
ÕÕD E
GetBytes
ÕÕE M
(
ÕÕM N
seed
ÕÕN R
)
ÕÕR S
)
ÕÕS T
;
ÕÕT U
int
ŒŒ 
uniqueId
ŒŒ 
=
ŒŒ 
BitConverter
ŒŒ '
.
ŒŒ' (
ToInt32
ŒŒ( /
(
ŒŒ/ 0
hash
ŒŒ0 4
,
ŒŒ4 5
$num
ŒŒ6 7
)
ŒŒ7 8
;
ŒŒ8 9
return
–– 
Math
–– 
.
–– 
Abs
–– 
(
–– 
uniqueId
–– $
)
––$ %
;
––% &
}
—— 	
}
““ 
private
÷÷ 
static
÷÷ 
bool
÷÷ 
Assigned
÷÷  
(
÷÷  !
this
÷÷! %
string
÷÷& ,
?
÷÷, -
source
÷÷. 4
)
÷÷4 5
=>
◊◊ 

!
◊◊ 
string
◊◊ 
.
◊◊  
IsNullOrWhiteSpace
◊◊ %
(
◊◊% &
source
◊◊& ,
??
◊◊- /
string
◊◊0 6
.
◊◊6 7
Empty
◊◊7 <
)
◊◊< =
;
◊◊= >
private
ŸŸ 
static
ŸŸ 
bool
ŸŸ 
Assigned
ŸŸ  
(
ŸŸ  !
this
ŸŸ! %
double
ŸŸ& ,
source
ŸŸ- 3
)
ŸŸ3 4
=>
⁄⁄ 

!
⁄⁄ 
double
⁄⁄ 
.
⁄⁄ 
IsNaN
⁄⁄ 
(
⁄⁄ 
source
⁄⁄ 
)
⁄⁄  
;
⁄⁄  !
private
‹‹ 
static
‹‹ 
bool
‹‹ 
Assigned
‹‹  
(
‹‹  !
this
‹‹! %
DateTime
‹‹& .
source
‹‹/ 5
)
‹‹5 6
=>
›› 

!
›› 
DateTime
›› 
.
›› 
Equals
›› 
(
›› 
source
›› "
,
››" #
DateTime
››$ ,
.
››, -
MinValue
››- 5
)
››5 6
;
››6 7
private
ﬂﬂ 
static
ﬂﬂ 
bool
ﬂﬂ 
Assigned
ﬂﬂ  
(
ﬂﬂ  !
this
ﬂﬂ! %
List
ﬂﬂ& *
<
ﬂﬂ* +
object
ﬂﬂ+ 1
>
ﬂﬂ1 2
?
ﬂﬂ2 3
list
ﬂﬂ4 8
)
ﬂﬂ8 9
{
‡‡ 
return
·· 
list
·· 
is
·· 
not
·· 
null
·· 
&&
··  "
list
··# '
.
··' (
Any
··( +
(
··+ ,
)
··, -
;
··- .
}
‚‚ 
private
‰‰ 
static
‰‰ 
bool
‰‰ 
Assigned
‰‰  
(
‰‰  !
this
‰‰! %
IEnumerable
‰‰& 1
<
‰‰1 2
object
‰‰2 8
>
‰‰8 9
?
‰‰9 :
list
‰‰; ?
)
‰‰? @
{
ÂÂ 
return
ÊÊ 
list
ÊÊ 
is
ÊÊ 
not
ÊÊ 
null
ÊÊ 
&&
ÊÊ  "
list
ÊÊ# '
.
ÊÊ' (
Any
ÊÊ( +
(
ÊÊ+ ,
)
ÊÊ, -
;
ÊÊ- .
}
ÁÁ 
public
ÈÈ 

static
ÈÈ 
bool
ÈÈ 
Assigned
ÈÈ 
(
ÈÈ  
this
ÈÈ  $
object
ÈÈ% +
source
ÈÈ, 2
)
ÈÈ2 3
{
ÍÍ 
switch
ÎÎ 
(
ÎÎ 
source
ÎÎ 
)
ÎÎ 
{
ÏÏ 	
case
ÌÌ 
DateTime
ÌÌ 
:
ÌÌ 
return
ÓÓ 
Convert
ÓÓ 
.
ÓÓ 

ToDateTime
ÓÓ )
(
ÓÓ) *
source
ÓÓ* 0
)
ÓÓ0 1
.
ÓÓ1 2
Assigned
ÓÓ2 :
(
ÓÓ: ;
)
ÓÓ; <
;
ÓÓ< =
case
ÔÔ 
string
ÔÔ 
:
ÔÔ 
return
 
Convert
 
.
 
ToString
 '
(
' (
source
( .
)
. /
.
/ 0
Assigned
0 8
(
8 9
)
9 :
;
: ;
case
ÒÒ 
double
ÒÒ 
:
ÒÒ 
return
ÚÚ 
Convert
ÚÚ 
.
ÚÚ 
ToDouble
ÚÚ '
(
ÚÚ' (
source
ÚÚ( .
)
ÚÚ. /
.
ÚÚ/ 0
Assigned
ÚÚ0 8
(
ÚÚ8 9
)
ÚÚ9 :
;
ÚÚ: ;
case
ÛÛ 
List
ÛÛ 
<
ÛÛ 
object
ÛÛ 
>
ÛÛ 
list
ÛÛ "
:
ÛÛ" #
return
ÙÙ 
list
ÙÙ 
.
ÙÙ 
Assigned
ÙÙ $
(
ÙÙ$ %
)
ÙÙ% &
;
ÙÙ& '
case
ıı 
IEnumerable
ıı 
<
ıı 
object
ıı #
>
ıı# $
objects
ıı% ,
:
ıı, -
return
ˆˆ 
objects
ˆˆ 
.
ˆˆ 
Assigned
ˆˆ '
(
ˆˆ' (
)
ˆˆ( )
;
ˆˆ) *
}
˜˜ 	
if
˘˘ 

(
˘˘ 
IsKeyValuePair
˘˘ 
(
˘˘ 
source
˘˘ !
)
˘˘! "
)
˘˘" #
return
˘˘$ *"
AssignedKeyValuePair
˘˘+ ?
(
˘˘? @
source
˘˘@ F
)
˘˘F G
;
˘˘G H
if
˚˚ 

(
˚˚ 
source
˚˚ 
is
˚˚ 
IDictionary
˚˚ !
{
˚˚" #
}
˚˚$ %

dictionary
˚˚& 0
)
˚˚0 1
return
˚˚2 8
Assigned
˚˚9 A
(
˚˚A B

dictionary
˚˚B L
)
˚˚L M
;
˚˚M N
return
˝˝ 
source
˝˝ 
!=
˝˝ 
DBNull
˝˝ 
.
˝˝  
Value
˝˝  %
;
˝˝% &
}
˛˛ 
private
ÄÄ 
static
ÄÄ 
bool
ÄÄ 
Assigned
ÄÄ  
(
ÄÄ  !
IDictionary
ÄÄ! ,
?
ÄÄ, -
source
ÄÄ. 4
)
ÄÄ4 5
=>
ÅÅ 

source
ÅÅ 
is
ÅÅ 
{
ÅÅ 
Count
ÅÅ 
:
ÅÅ 
>
ÅÅ 
$num
ÅÅ  !
}
ÅÅ" #
;
ÅÅ# $
private
ÉÉ 
static
ÉÉ 
bool
ÉÉ 
Assigned
ÉÉ  
<
ÉÉ  !
T
ÉÉ! "
,
ÉÉ" #
TU
ÉÉ$ &
>
ÉÉ& '
(
ÉÉ' (
this
ÉÉ( ,
KeyValuePair
ÉÉ- 9
<
ÉÉ9 :
T
ÉÉ: ;
,
ÉÉ; <
TU
ÉÉ= ?
>
ÉÉ? @
pair
ÉÉA E
)
ÉÉE F
=>
ÑÑ 

!
ÑÑ 
pair
ÑÑ 
.
ÑÑ 
Equals
ÑÑ 
(
ÑÑ 
new
ÑÑ 
KeyValuePair
ÑÑ (
<
ÑÑ( )
T
ÑÑ) *
,
ÑÑ* +
TU
ÑÑ, .
>
ÑÑ. /
(
ÑÑ/ 0
)
ÑÑ0 1
)
ÑÑ1 2
&&
ÑÑ3 5
pair
ÑÑ6 :
.
ÑÑ: ;
Assigned
ÑÑ; C
(
ÑÑC D
)
ÑÑD E
;
ÑÑE F
private
ÜÜ 
static
ÜÜ 
bool
ÜÜ "
AssignedKeyValuePair
ÜÜ ,
(
ÜÜ, -
object
ÜÜ- 3
source
ÜÜ4 :
)
ÜÜ: ;
{
áá 
return
àà 
source
àà 
switch
àà 
{
ââ 	
KeyValuePair
ää 
<
ää 
object
ää 
,
ää  
object
ää! '
>
ää' (
pair
ää) -
=>
ää. 0
pair
ää1 5
.
ää5 6
Assigned
ää6 >
(
ää> ?
)
ää? @
,
ää@ A
KeyValuePair
ãã 
<
ãã 
object
ãã 
,
ãã  
string
ãã! '
>
ãã' (
pair
ãã) -
=>
ãã. 0
pair
ãã1 5
.
ãã5 6
Assigned
ãã6 >
(
ãã> ?
)
ãã? @
,
ãã@ A
KeyValuePair
åå 
<
åå 
string
åå 
,
åå  
object
åå! '
>
åå' (
pair
åå) -
=>
åå. 0
pair
åå1 5
.
åå5 6
Assigned
åå6 >
(
åå> ?
)
åå? @
,
åå@ A
KeyValuePair
çç 
<
çç 
string
çç 
,
çç  
string
çç! '
>
çç' (
pair
çç) -
=>
çç. 0
pair
çç1 5
.
çç5 6
Assigned
çç6 >
(
çç> ?
)
çç? @
,
çç@ A
_
éé 
=>
éé 
false
éé 
}
èè 	
;
èè	 

}
êê 
private
íí 
static
íí 
bool
íí 
IsKeyValuePair
íí &
(
íí& '
object
íí' -
?
íí- .
source
íí/ 5
)
íí5 6
{
ìì 
if
îî 

(
îî 
source
îî 
is
îî 
null
îî 
)
îî 
return
îî "
false
îî# (
;
îî( )
var
ïï 
type
ïï 
=
ïï 
source
ïï 
.
ïï 
GetType
ïï !
(
ïï! "
)
ïï" #
;
ïï# $
if
óó 

(
óó 
type
óó 
.
óó 
IsGenericType
óó 
)
óó 
return
òò 
type
òò 
.
òò &
GetGenericTypeDefinition
òò 0
(
òò0 1
)
òò1 2
==
òò3 5
typeof
òò6 <
(
òò< =
KeyValuePair
òò= I
<
òòI J
,
òòJ K
>
òòK L
)
òòL M
;
òòM N
return
öö 
false
öö 
;
öö 
}
õõ 
private
°° 
static
°° 
bool
°° 
NotAssigned
°° #
(
°°# $
this
°°$ (
string
°°) /
?
°°/ 0
source
°°1 7
)
°°7 8
=>
¢¢ 

string
¢¢ 
.
¢¢  
IsNullOrWhiteSpace
¢¢ $
(
¢¢$ %
source
¢¢% +
)
¢¢+ ,
;
¢¢, -
private
§§ 
static
§§ 
bool
§§ 
NotAssigned
§§ #
(
§§# $
this
§§$ (
double
§§) /
source
§§0 6
)
§§6 7
=>
•• 

double
•• 
.
•• 
IsNaN
•• 
(
•• 
source
•• 
)
•• 
;
••  
private
ßß 
static
ßß 
bool
ßß 
NotAssigned
ßß #
(
ßß# $
this
ßß$ (
DateTime
ßß) 1
source
ßß2 8
)
ßß8 9
=>
®® 

DateTime
®® 
.
®® 
Equals
®® 
(
®® 
source
®® !
,
®®! "
DateTime
®®# +
.
®®+ ,
MinValue
®®, 4
)
®®4 5
;
®®5 6
private
™™ 
static
™™ 
bool
™™ 
NotAssigned
™™ #
(
™™# $
this
™™$ (
List
™™) -
<
™™- .
object
™™. 4
>
™™4 5
?
™™5 6
list
™™7 ;
)
™™; <
{
´´ 
return
¨¨ 
list
¨¨ 
is
¨¨ 
null
¨¨ 
||
¨¨ 
!
¨¨  
list
¨¨  $
.
¨¨$ %
Any
¨¨% (
(
¨¨( )
)
¨¨) *
;
¨¨* +
}
≠≠ 
private
ØØ 
static
ØØ 
bool
ØØ 
NotAssigned
ØØ #
(
ØØ# $
this
ØØ$ (
IEnumerable
ØØ) 4
<
ØØ4 5
object
ØØ5 ;
>
ØØ; <
?
ØØ< =
list
ØØ> B
)
ØØB C
{
∞∞ 
return
±± 
list
±± 
is
±± 
null
±± 
||
±± 
!
±±  
list
±±  $
.
±±$ %
Any
±±% (
(
±±( )
)
±±) *
;
±±* +
}
≤≤ 
public
¥¥ 

static
¥¥ 
bool
¥¥ 
NotAssigned
¥¥ "
(
¥¥" #
this
¥¥# '
object
¥¥( .
source
¥¥/ 5
)
¥¥5 6
{
µµ 
switch
∂∂ 
(
∂∂ 
source
∂∂ 
)
∂∂ 
{
∑∑ 	
case
∏∏ 
DateTime
∏∏ 
:
∏∏ 
return
ππ 
Convert
ππ 
.
ππ 

ToDateTime
ππ )
(
ππ) *
source
ππ* 0
)
ππ0 1
.
ππ1 2
NotAssigned
ππ2 =
(
ππ= >
)
ππ> ?
;
ππ? @
case
∫∫ 
string
∫∫ 
:
∫∫ 
return
ªª 
Convert
ªª 
.
ªª 
ToString
ªª '
(
ªª' (
source
ªª( .
)
ªª. /
.
ªª/ 0
NotAssigned
ªª0 ;
(
ªª; <
)
ªª< =
;
ªª= >
case
ºº 
double
ºº 
:
ºº 
return
ΩΩ 
Convert
ΩΩ 
.
ΩΩ 
ToDouble
ΩΩ '
(
ΩΩ' (
source
ΩΩ( .
)
ΩΩ. /
.
ΩΩ/ 0
NotAssigned
ΩΩ0 ;
(
ΩΩ; <
)
ΩΩ< =
;
ΩΩ= >
case
ææ 
List
ææ 
<
ææ 
object
ææ 
>
ææ 
list
ææ "
:
ææ" #
return
øø 
list
øø 
.
øø 
NotAssigned
øø '
(
øø' (
)
øø( )
;
øø) *
case
¿¿ 
IEnumerable
¿¿ 
<
¿¿ 
object
¿¿ #
>
¿¿# $
objects
¿¿% ,
:
¿¿, -
return
¡¡ 
objects
¡¡ 
.
¡¡ 
NotAssigned
¡¡ *
(
¡¡* +
)
¡¡+ ,
;
¡¡, -
}
¬¬ 	
if
ƒƒ 

(
ƒƒ 
IsKeyValuePair
ƒƒ 
(
ƒƒ 
source
ƒƒ !
)
ƒƒ! "
)
ƒƒ" #
return
ƒƒ$ *%
NotAssignedKeyValuePair
ƒƒ+ B
(
ƒƒB C
source
ƒƒC I
)
ƒƒI J
;
ƒƒJ K
if
∆∆ 

(
∆∆ 
source
∆∆ 
is
∆∆ 
IDictionary
∆∆ !
{
∆∆" #
}
∆∆$ %

dictionary
∆∆& 0
)
∆∆0 1
return
∆∆2 8
NotAssigned
∆∆9 D
(
∆∆D E

dictionary
∆∆E O
)
∆∆O P
;
∆∆P Q
return
»» 
source
»» 
==
»» 
DBNull
»» 
.
»»  
Value
»»  %
;
»»% &
}
…… 
private
ÀÀ 
static
ÀÀ 
bool
ÀÀ 
NotAssigned
ÀÀ #
(
ÀÀ# $
IDictionary
ÀÀ$ /
?
ÀÀ/ 0
source
ÀÀ1 7
)
ÀÀ7 8
=>
ÃÃ 

source
ÃÃ 
is
ÃÃ 
null
ÃÃ 
||
ÃÃ 
source
ÃÃ #
.
ÃÃ# $
Count
ÃÃ$ )
==
ÃÃ* ,
$num
ÃÃ- .
;
ÃÃ. /
private
ŒŒ 
static
ŒŒ 
bool
ŒŒ 
NotAssigned
ŒŒ #
<
ŒŒ# $
T
ŒŒ$ %
,
ŒŒ% &
TU
ŒŒ' )
>
ŒŒ) *
(
ŒŒ* +
this
ŒŒ+ /
KeyValuePair
ŒŒ0 <
<
ŒŒ< =
T
ŒŒ= >
,
ŒŒ> ?
TU
ŒŒ@ B
>
ŒŒB C
pair
ŒŒD H
)
ŒŒH I
=>
œœ 

pair
œœ 
.
œœ 
Equals
œœ 
(
œœ 
new
œœ 
KeyValuePair
œœ '
<
œœ' (
T
œœ( )
,
œœ) *
TU
œœ+ -
>
œœ- .
(
œœ. /
)
œœ/ 0
)
œœ0 1
||
œœ2 4
pair
œœ5 9
.
œœ9 :
NotAssigned
œœ: E
(
œœE F
)
œœF G
;
œœG H
private
—— 
static
—— 
bool
—— %
NotAssignedKeyValuePair
—— /
(
——/ 0
object
——0 6
source
——7 =
)
——= >
{
““ 
return
”” 
source
”” 
switch
”” 
{
‘‘ 	
KeyValuePair
’’ 
<
’’ 
object
’’ 
,
’’  
object
’’! '
>
’’' (
pair
’’) -
=>
’’. 0
pair
’’1 5
.
’’5 6
NotAssigned
’’6 A
(
’’A B
)
’’B C
,
’’C D
KeyValuePair
÷÷ 
<
÷÷ 
object
÷÷ 
,
÷÷  
string
÷÷! '
>
÷÷' (
pair
÷÷) -
=>
÷÷. 0
pair
÷÷1 5
.
÷÷5 6
NotAssigned
÷÷6 A
(
÷÷A B
)
÷÷B C
,
÷÷C D
KeyValuePair
◊◊ 
<
◊◊ 
string
◊◊ 
,
◊◊  
object
◊◊! '
>
◊◊' (
pair
◊◊) -
=>
◊◊. 0
pair
◊◊1 5
.
◊◊5 6
NotAssigned
◊◊6 A
(
◊◊A B
)
◊◊B C
,
◊◊C D
KeyValuePair
ÿÿ 
<
ÿÿ 
string
ÿÿ 
,
ÿÿ  
string
ÿÿ! '
>
ÿÿ' (
pair
ÿÿ) -
=>
ÿÿ. 0
pair
ÿÿ1 5
.
ÿÿ5 6
NotAssigned
ÿÿ6 A
(
ÿÿA B
)
ÿÿB C
,
ÿÿC D
_
ŸŸ 
=>
ŸŸ 
true
ŸŸ 
}
⁄⁄ 	
;
⁄⁄	 

}
€€ 
public
·· 

static
·· 
double
·· 
ToDouble
·· !
(
··! "
this
··" &
object
··' -
source
··. 4
)
··4 5
=>
‚‚ 

Convert
‚‚ 
.
‚‚ 
ToDouble
‚‚ 
(
‚‚ 
source
‚‚ "
)
‚‚" #
;
‚‚# $
public
‰‰ 

static
‰‰ 
decimal
‰‰ 
	ToDecimal
‰‰ #
(
‰‰# $
this
‰‰$ (
object
‰‰) /
source
‰‰0 6
)
‰‰6 7
=>
ÂÂ 

Convert
ÂÂ 
.
ÂÂ 
	ToDecimal
ÂÂ 
(
ÂÂ 
source
ÂÂ #
)
ÂÂ# $
;
ÂÂ$ %
public
ÁÁ 

static
ÁÁ 
int
ÁÁ 
ToInt32
ÁÁ 
(
ÁÁ 
this
ÁÁ "
object
ÁÁ# )
source
ÁÁ* 0
)
ÁÁ0 1
=>
ËË 

Convert
ËË 
.
ËË 
ToInt32
ËË 
(
ËË 
source
ËË !
)
ËË! "
;
ËË" #
public
ÍÍ 

static
ÍÍ 
long
ÍÍ 
ToInt64
ÍÍ 
(
ÍÍ 
this
ÍÍ #
object
ÍÍ$ *
source
ÍÍ+ 1
)
ÍÍ1 2
=>
ÎÎ 

Convert
ÎÎ 
.
ÎÎ 
ToInt64
ÎÎ 
(
ÎÎ 
source
ÎÎ !
)
ÎÎ! "
;
ÎÎ" #
public
ÌÌ 

static
ÌÌ 
short
ÌÌ 
ToInt16
ÌÌ 
(
ÌÌ  
this
ÌÌ  $
object
ÌÌ% +
source
ÌÌ, 2
)
ÌÌ2 3
=>
ÓÓ 

Convert
ÓÓ 
.
ÓÓ 
ToInt16
ÓÓ 
(
ÓÓ 
source
ÓÓ !
)
ÓÓ! "
;
ÓÓ" #
public
 

static
 
float
 
ToFloat
 
(
  
this
  $
int
% (
source
) /
)
/ 0
=>
ÒÒ 

source
ÒÒ 
;
ÒÒ 
public
ÛÛ 

static
ÛÛ 
byte
ÛÛ 
ToByte
ÛÛ 
(
ÛÛ 
this
ÛÛ "
object
ÛÛ# )
source
ÛÛ* 0
)
ÛÛ0 1
=>
ÙÙ 

Convert
ÙÙ 
.
ÙÙ 
ToByte
ÙÙ 
(
ÙÙ 
source
ÙÙ  
)
ÙÙ  !
;
ÙÙ! "
public
ˆˆ 

static
ˆˆ 
bool
ˆˆ 
ToBool
ˆˆ 
(
ˆˆ 
this
ˆˆ "
object
ˆˆ# )
source
ˆˆ* 0
)
ˆˆ0 1
{
˜˜ 
bool
¯¯ 
result
¯¯ 
;
¯¯ 
try
˘˘ 
{
˙˙ 	
result
˚˚ 
=
˚˚ 
Convert
˚˚ 
.
˚˚ 
	ToBoolean
˚˚ &
(
˚˚& '
source
˚˚' -
)
˚˚- .
;
˚˚. /
}
¸¸ 	
catch
˝˝ 
(
˝˝ 
	Exception
˝˝ 
)
˝˝ 
{
˛˛ 	
result
ˇˇ 
=
ˇˇ 
Convert
ˇˇ 
.
ˇˇ 
	ToBoolean
ˇˇ &
(
ˇˇ& '
Convert
ˇˇ' .
.
ˇˇ. /
ToInt32
ˇˇ/ 6
(
ˇˇ6 7
source
ˇˇ7 =
)
ˇˇ= >
)
ˇˇ> ?
;
ˇˇ? @
}
ÄÄ 	
return
ÇÇ 
result
ÇÇ 
;
ÇÇ 
}
ÉÉ 
public
ÖÖ 

static
ÖÖ 
List
ÖÖ 
<
ÖÖ 
int
ÖÖ 
>
ÖÖ 
ToInt32List
ÖÖ '
(
ÖÖ' (
this
ÖÖ( ,
List
ÖÖ- 1
<
ÖÖ1 2
object
ÖÖ2 8
>
ÖÖ8 9
source
ÖÖ: @
)
ÖÖ@ A
=>
ÜÜ 

source
ÜÜ 
.
ÜÜ 

ConvertAll
ÜÜ 
(
ÜÜ 
x
ÜÜ 
=>
ÜÜ !
x
ÜÜ" #
.
ÜÜ# $
ToInt32
ÜÜ$ +
(
ÜÜ+ ,
)
ÜÜ, -
)
ÜÜ- .
;
ÜÜ. /
public
àà 

static
àà 
object
àà 
GetValue
àà !
(
àà! "
this
àà" &
DbDataReader
àà' 3
source
àà4 :
,
àà: ;
string
àà< B
name
ààC G
)
ààG H
=>
ââ 

source
ââ 
.
ââ 
GetValue
ââ 
(
ââ 
source
ââ !
.
ââ! "

GetOrdinal
ââ" ,
(
ââ, -
name
ââ- 1
)
ââ1 2
)
ââ2 3
;
ââ3 4
public
ãã 

static
ãã 
string
ãã 
ToUrlEncode
ãã $
(
ãã$ %
this
ãã% )
string
ãã* 0
source
ãã1 7
)
ãã7 8
=>
åå 

HttpUtility
åå 
.
åå 
	UrlEncode
åå  
(
åå  !
source
åå! '
)
åå' (
;
åå( )
public
éé 

static
éé 
DateTime
éé 

ToDateTime
éé %
(
éé% &
this
éé& *
int
éé+ .
source
éé/ 5
)
éé5 6
{
èè 
var
êê 
dateTime
êê 
=
êê 
new
êê 
DateTime
êê #
(
êê# $
$num
êê$ (
,
êê( )
$num
êê* +
,
êê+ ,
$num
êê- .
,
êê. /
$num
êê0 1
,
êê1 2
$num
êê3 4
,
êê4 5
$num
êê6 7
,
êê7 8
$num
êê9 :
,
êê: ;
DateTimeKind
êê< H
.
êêH I
Local
êêI N
)
êêN O
;
êêO P
return
íí 
dateTime
íí 
.
íí 

AddSeconds
íí "
(
íí" #
source
íí# )
)
íí) *
;
íí* +
}
ìì 
public
ïï 

static
ïï 
DateTime
ïï 

ToDateTime
ïï %
(
ïï% &
this
ïï& *
string
ïï+ 1
source
ïï2 8
)
ïï8 9
=>
ññ 

DateTime
ññ 
.
ññ 
Parse
ññ 
(
ññ 
source
ññ  
)
ññ  !
;
ññ! "
public
òò 

static
òò 
int
òò 
ToUnixTimeSecond
òò &
(
òò& '
this
òò' +
DateTime
òò, 4
source
òò5 ;
)
òò; <
=>
ôô 

(
ôô 
(
ôô 
DateTimeOffset
ôô 
)
ôô 
source
ôô "
)
ôô" #
.
ôô# $
ToUnixTimeSeconds
ôô$ 5
(
ôô5 6
)
ôô6 7
.
ôô7 8
ToInt32
ôô8 ?
(
ôô? @
)
ôô@ A
;
ôôA B
public
õõ 

static
õõ 
string
õõ 
?
õõ 
ToEnumString
õõ &
<
õõ& '
T
õõ' (
>
õõ( )
(
õõ) *
this
õõ* .
object
õõ/ 5
source
õõ6 <
)
õõ< =
=>
úú 

Enum
úú 
.
úú 
GetName
úú 
(
úú 
typeof
úú 
(
úú 
T
úú  
)
úú  !
,
úú! "
source
úú# )
)
úú) *
;
úú* +
public
¢¢ 

static
¢¢ 
bool
¢¢ 
	IsNumeric
¢¢  
(
¢¢  !
this
¢¢! %
object
¢¢& ,
source
¢¢- 3
)
¢¢3 4
=>
££ 

int
££ 
.
££ 
TryParse
££ 
(
££ 
source
££ 
.
££ 
ToString
££ '
(
££' (
)
££( )
,
££) *
out
££+ .
_
££/ 0
)
££0 1
;
££1 2
public
•• 

static
•• 
bool
•• 
IsList
•• 
(
•• 
this
•• "
object
••# )
source
••* 0
)
••0 1
=>
¶¶ 

source
¶¶ 
is
¶¶ 
List
¶¶ 
<
¶¶ 
object
¶¶  
>
¶¶  !
;
¶¶! "
public
®® 

static
®® 
bool
®® 
IsDictionary
®® #
(
®®# $
this
®®$ (
object
®®) /
source
®®0 6
)
®®6 7
=>
©© 

source
©© 
is
©© 

Dictionary
©© 
<
©©  
object
©©  &
,
©©& '
object
©©( .
>
©©. /
;
©©/ 0
public
´´ 

static
´´ 
bool
´´ 
IsPropertyExist
´´ &
(
´´& '
this
´´' +
object
´´, 2
dynamics
´´3 ;
,
´´; <
string
´´= C
name
´´D H
)
´´H I
{
¨¨ 
if
≠≠ 

(
≠≠ 
dynamics
≠≠ 
is
≠≠ 
ExpandoObject
≠≠ %
)
≠≠% &
return
ÆÆ 
(
ÆÆ 
(
ÆÆ 
IDictionary
ÆÆ  
<
ÆÆ  !
string
ÆÆ! '
,
ÆÆ' (
object
ÆÆ) /
>
ÆÆ/ 0
)
ÆÆ0 1
dynamics
ÆÆ1 9
)
ÆÆ9 :
.
ÆÆ: ;
ContainsKey
ÆÆ; F
(
ÆÆF G
name
ÆÆG K
)
ÆÆK L
;
ÆÆL M
return
∞∞ 
dynamics
∞∞ 
.
∞∞ 
GetType
∞∞ 
(
∞∞  
)
∞∞  !
.
∞∞! "
GetProperty
∞∞" -
(
∞∞- .
name
∞∞. 2
)
∞∞2 3
!=
∞∞4 6
null
∞∞7 ;
;
∞∞; <
}
±± 
public
≥≥ 

static
≥≥ 
bool
≥≥ 
IsPropertyExists
≥≥ '
(
≥≥' (
dynamic
≥≥( /
dynamics
≥≥0 8
,
≥≥8 9
string
≥≥: @
name
≥≥A E
)
≥≥E F
{
¥¥ 
if
µµ 

(
µµ 
dynamics
µµ 
is
µµ 
ExpandoObject
µµ %
)
µµ% &
return
∂∂ 
(
∂∂ 
(
∂∂ 
IDictionary
∂∂  
<
∂∂  !
string
∂∂! '
,
∂∂' (
object
∂∂) /
>
∂∂/ 0
)
∂∂0 1
dynamics
∂∂1 9
)
∂∂9 :
.
∂∂: ;
ContainsKey
∂∂; F
(
∂∂F G
name
∂∂G K
)
∂∂K L
;
∂∂L M
return
∏∏ 
dynamics
∏∏ 
.
∏∏ 
GetType
∏∏ 
(
∏∏  
)
∏∏  !
.
∏∏! "
GetProperty
∏∏" -
(
∏∏- .
name
∏∏. 2
)
∏∏2 3
!=
∏∏4 6
null
∏∏7 ;
;
∏∏; <
}
ππ 
public
øø 

static
øø 
IEnumerable
øø 
<
øø 
T
øø 
>
øø  

DistinctBy
øø! +
<
øø+ ,
T
øø, -
,
øø- .
TKey
øø/ 3
>
øø3 4
(
øø4 5
this
øø5 9
IEnumerable
øø: E
<
øøE F
T
øøF G
>
øøG H

enumerable
øøI S
,
øøS T
Func
øøU Y
<
øøY Z
T
øøZ [
,
øø[ \
TKey
øø] a
>
øøa b
keySelector
øøc n
)
øøn o
=>
¿¿ 


enumerable
¿¿ 
.
¿¿ 
GroupBy
¿¿ 
(
¿¿ 
keySelector
¿¿ )
)
¿¿) *
.
¿¿* +
Select
¿¿+ 1
(
¿¿1 2
grp
¿¿2 5
=>
¿¿6 8
grp
¿¿9 <
.
¿¿< =
First
¿¿= B
(
¿¿B C
)
¿¿C D
)
¿¿D E
;
¿¿E F
public
¬¬ 

static
¬¬ 
string
¬¬ 
Replace
¬¬  
(
¬¬  !
this
¬¬! %
string
¬¬& ,
source
¬¬- 3
,
¬¬3 4
ICollection
¬¬5 @
<
¬¬@ A
string
¬¬A G
>
¬¬G H
list
¬¬I M
,
¬¬M N
string
¬¬O U
replacement
¬¬V a
)
¬¬a b
{
√√ 
var
ƒƒ 
d
ƒƒ 
=
ƒƒ 
source
ƒƒ 
;
ƒƒ 
foreach
≈≈ 
(
≈≈ 
var
≈≈ 
item
≈≈ 
in
≈≈ 
list
≈≈ !
)
≈≈! "
d
∆∆ 
=
∆∆ 
d
∆∆ 
.
∆∆ 
Replace
∆∆ 
(
∆∆ 
item
∆∆ 
,
∆∆ 
replacement
∆∆  +
)
∆∆+ ,
;
∆∆, -
return
»» 
d
»» 
;
»» 
}
…… 
public
ÃÃ 

static
ÃÃ 
string
ÃÃ 
	ReplaceAt
ÃÃ "
(
ÃÃ" #
this
ÃÃ# '
string
ÃÃ( .
source
ÃÃ/ 5
,
ÃÃ5 6
string
ÃÃ7 =
replace
ÃÃ> E
,
ÃÃE F
int
ÃÃG J
index
ÃÃK P
,
ÃÃP Q
int
ÃÃR U
length
ÃÃV \
)
ÃÃ\ ]
{
ÕÕ 
if
ŒŒ 

(
ŒŒ 
index
ŒŒ 
<
ŒŒ 
$num
ŒŒ 
)
ŒŒ 
return
œœ 
source
œœ 
;
œœ 
return
—— 
source
—— 
.
—— 
Remove
—— 
(
—— 
index
—— "
,
——" #
Math
——$ (
.
——( )
Min
——) ,
(
——, -
length
——- 3
,
——3 4
source
——5 ;
.
——; <
Length
——< B
-
——C D
index
——E J
)
——J K
)
——K L
.
““ 
Insert
““ 
(
““ 
index
““ 
,
““ 
replace
““ "
)
““" #
;
““# $
}
”” 
public
’’ 

static
’’ 
string
’’ 
ToMd5
’’ 
(
’’ 
this
’’ #
string
’’$ *
s
’’+ ,
)
’’, -
{
÷÷ 
var
◊◊ 
builder
◊◊ 
=
◊◊ 
new
◊◊ 
StringBuilder
◊◊ '
(
◊◊' (
)
◊◊( )
;
◊◊) *
foreach
ŸŸ 
(
ŸŸ 
var
ŸŸ 
b
ŸŸ 
in
ŸŸ 
MD5
ŸŸ 
.
ŸŸ 
HashData
ŸŸ &
(
ŸŸ& '
Encoding
ŸŸ' /
.
ŸŸ/ 0
UTF8
ŸŸ0 4
.
ŸŸ4 5
GetBytes
ŸŸ5 =
(
ŸŸ= >
s
ŸŸ> ?
)
ŸŸ? @
)
ŸŸ@ A
)
ŸŸA B
builder
⁄⁄ 
.
⁄⁄ 
Append
⁄⁄ 
(
⁄⁄ 
b
⁄⁄ 
.
⁄⁄ 
ToString
⁄⁄ %
(
⁄⁄% &
$str
⁄⁄& *
)
⁄⁄* +
.
⁄⁄+ ,
ToLower
⁄⁄, 3
(
⁄⁄3 4
)
⁄⁄4 5
)
⁄⁄5 6
;
⁄⁄6 7
return
‹‹ 
builder
‹‹ 
.
‹‹ 
ToString
‹‹ 
(
‹‹  
)
‹‹  !
;
‹‹! "
}
›› 
public
ﬂﬂ 

static
ﬂﬂ 
string
ﬂﬂ 
ReplaceHtml
ﬂﬂ $
(
ﬂﬂ$ %
this
ﬂﬂ% )
string
ﬂﬂ* 0
str
ﬂﬂ1 4
,
ﬂﬂ4 5

Dictionary
ﬂﬂ6 @
<
ﬂﬂ@ A
string
ﬂﬂA G
,
ﬂﬂG H
string
ﬂﬂI O
>
ﬂﬂO P
dict
ﬂﬂQ U
)
ﬂﬂU V
{
‡‡ 
var
·· 
sb
·· 
=
·· 
new
·· 
StringBuilder
·· "
(
··" #
str
··# &
)
··& '
;
··' (
return
„„ 
sb
„„ 
.
„„ 
ReplaceHtml
„„ 
(
„„ 
dict
„„ "
)
„„" #
.
„„# $
ToString
„„$ ,
(
„„, -
)
„„- .
;
„„. /
}
‰‰ 
private
ÊÊ 
static
ÊÊ 
StringBuilder
ÊÊ  
ReplaceHtml
ÊÊ! ,
(
ÊÊ, -
this
ÊÊ- 1
StringBuilder
ÊÊ2 ?
sb
ÊÊ@ B
,
ÊÊB C

Dictionary
ÊÊD N
<
ÊÊN O
string
ÊÊO U
,
ÊÊU V
string
ÊÊW ]
>
ÊÊ] ^
dict
ÊÊ_ c
)
ÊÊc d
{
ÁÁ 
foreach
ËË 
(
ËË 
var
ËË 
replacement
ËË  
in
ËË! #
dict
ËË$ (
)
ËË( )
sb
ÈÈ 
.
ÈÈ 
Replace
ÈÈ 
(
ÈÈ 
replacement
ÈÈ "
.
ÈÈ" #
Key
ÈÈ# &
,
ÈÈ& '
replacement
ÈÈ( 3
.
ÈÈ3 4
Value
ÈÈ4 9
)
ÈÈ9 :
;
ÈÈ: ;
return
ÎÎ 
sb
ÎÎ 
;
ÎÎ 
}
ÏÏ 
public
ÓÓ 

static
ÓÓ 
string
ÓÓ &
GenerateVerificationCode
ÓÓ 1
(
ÓÓ1 2
int
ÓÓ2 5
number
ÓÓ6 <
)
ÓÓ< =
{
ÔÔ 
var
 
checksum
 
=
 
(
 
$num
 
-
 
(
 
number
 $
*
% &
$num
' *
)
* +
%
, -
$num
. 0
)
0 1
%
2 3
$num
4 6
;
6 7
return
ÒÒ 
$"
ÒÒ 
{
ÒÒ 
number
ÒÒ 
}
ÒÒ 
$str
ÒÒ 
{
ÒÒ 
checksum
ÒÒ #
}
ÒÒ# $
$str
ÒÒ$ (
"
ÒÒ( )
;
ÒÒ) *
}
ÚÚ 
}ıı ‰r
UC:\HeroSystem\walletService\WalletService.Utility\Extensions\LeaderBoardExtensions.cs
	namespace 	
WalletService
 
. 
Utility 
.  

Extensions  *
;* +
public 
static 
class !
LeaderBoardExtensions )
{ 
public		 

static		 
List		 
<		 
LeaderBoardModel4		 (
>		( )
OrderModel4		* 5
(		5 6
this		6 :
IEnumerable		; F
<		F G
LeaderBoardModel4		G X
>		X Y
users		Z _
)		_ `
{

 
var 
orderedUsers 
= 
users  
. 
OrderByDescending 
( 
u  
=>! #
u$ %
.% &
Amount& ,
), -
. 
ThenBy 
( 
u 
=> 
u 
. 
UserCreatedAt (
)( )
. 
ToList 
( 
) 
; 
var 
queue 
= 
new 
Queue  %
<% &
LeaderBoardModel4& 7
>7 8
(8 9
)9 :
;: ;
var 
childrenCount 
= 
$num 
; 
if 

( 
orderedUsers 
is 
{ 
Count #
:# $
>$ %
$num& '
}' (
)( )
{ 	
var 
	firstUser 
= 
orderedUsers (
[( )
$num) *
]* +
;+ ,
	firstUser 
. 
	PositionX 
=  !
$num" #
;# $
	firstUser 
. 
	PositionY 
=  !
$num" #
;# $
	firstUser 
. 
Level 
=  !
$num" #
;# $
queue 
. 
Enqueue 
( 
	firstUser #
)# $
;$ %
} 	
for 
( 
var 
i 
= 
$num 
; 
i 
< 
orderedUsers (
.( )
Count) .
;. /
i0 1
++1 3
)3 4
{ 	
var 
user 
= 
orderedUsers %
[% &
i& '
]' (
;( )
var 
father 
= 
queue 
. 
Peek #
(# $
)$ %
;% &
if!! 
(!! 
childrenCount!! 
<!! 
	Constants!!  )
.!!) *
ChildrenLimitModel4!!* =
)!!= >
{"" 
childrenCount## 
++## 
;##  
user$$ 
.$$ 
FatherModel4$$ !
=$$" #
father$$$ *
.$$* +
AffiliateId$$+ 6
;$$6 7
user%% 
.%% 
	PositionX%% 
=%%" #
childrenCount%%$ 1
;%%1 2
user&& 
.&& 
	PositionY&& 
=&&" #
father&&$ *
.&&* +
Level&&+ 0
+&&1 2
$num&&3 4
;&&4 5
user'' 
.'' 
Level'' 
=''" #
father''$ *
.''* +
Level''+ 0
+''1 2
$num''3 4
;''4 5
}(( 
else)) 
{** 
queue++ 
.++ 
Dequeue++ 
(++ 
)++ 
;++  
father,, 
=,," #
queue,,$ )
.,,) *
Peek,,* .
(,,. /
),,/ 0
;,,0 1
childrenCount-- 
=--" #
$num--$ %
;--% &
user.. 
... 
FatherModel4.. !
=.." #
father..$ *
...* +
AffiliateId..+ 6
;..6 7
user// 
.// 
	PositionX// 
=//" #
childrenCount//$ 1
;//1 2
user00 
.00 
	PositionY00 
=00" #
father00$ *
.00* +
Level00+ 0
+001 2
$num003 4
;004 5
user11 
.11 
Level11 
=11" #
father11$ *
.11* +
Level11+ 0
+111 2
$num113 4
;114 5
}22 
queue33 
.33 
Enqueue33 
(33 
user33 
)33 
;33  
}44 	
return55 
orderedUsers55 
;55 
}66 
public88 

static88 
List88 
<88 
LeaderBoardModel588 (
>88( )
OrderModel588* 5
(885 6
this886 :
IEnumerable88; F
<88F G
LeaderBoardModel588G X
>88X Y
users88Z _
)88_ `
{99 
var:: 
orderedUsers:: 
=:: 
users::  
.;; 
OrderByDescending;; 
(;; 
u;;  
=>;;! #
u;;$ %
.;;% &
Amount;;& ,
);;, -
.<< 
ThenBy<< 
(<< 
u<< 
=><< 
u<< 
.<< 
UserCreatedAt<< (
)<<( )
.== 
ToList== 
(== 
)== 
;== 
var?? 
queue?? 
=?? 
new?? 
Queue??  %
<??% &
LeaderBoardModel5??& 7
>??7 8
(??8 9
)??9 :
;??: ;
var@@ 
childrenCount@@ 
=@@ 
$num@@ 
;@@ 
varAA 
levelsCountAA 
=AA 
$numAA 
;AA 
ifCC 

(CC 
orderedUsersCC 
.CC 
CountCC 
>CC  
$numCC! "
)CC" #
{DD 	
varEE 
	firstUserEE 
=EE 
orderedUsersEE (
[EE( )
$numEE) *
]EE* +
;EE+ ,
	firstUserFF 
.FF 
	PositionXFF 
=FF  !
$numFF" #
;FF# $
	firstUserGG 
.GG 
	PositionYGG 
=GG  !
$numGG" #
;GG# $
	firstUserHH 
.HH 
LevelHH 
=HH  !
$numHH" #
;HH# $
queueII 
.II 
EnqueueII 
(II 
	firstUserII #
)II# $
;II$ %
}JJ 	
forLL 
(LL 
varLL 
iLL 
=LL 
$numLL 
;LL 
iLL 
<LL 
orderedUsersLL (
.LL( )
CountLL) .
;LL. /
iLL0 1
++LL1 3
)LL3 4
{MM 	
varNN 
userNN 
=NN 
orderedUsersNN %
[NN% &
iNN& '
]NN' (
;NN( )
varOO 
fatherOO 
=OO 
queueOO 
.OO 
PeekOO #
(OO# $
)OO$ %
;OO% &
ifQQ 
(QQ 
childrenCountQQ 
<QQ 
	ConstantsQQ  )
.QQ) *
ChildrenLimitModel5QQ* =
)QQ= >
{RR 
childrenCountSS 
++SS 
;SS  
userTT 
.TT 
FatherModel5TT !
=TT" #
fatherTT$ *
.TT* +
AffiliateIdTT+ 6
;TT6 7
userUU 
.UU 
	PositionXUU 
=UU" #
childrenCountUU$ 1
;UU1 2
userVV 
.VV 
	PositionYVV 
=VV" #
fatherVV$ *
.VV* +
LevelVV+ 0
+VV1 2
$numVV3 4
;VV4 5
userWW 
.WW 
LevelWW 
=WW" #
fatherWW$ *
.WW* +
LevelWW+ 0
+WW1 2
$numWW3 4
;WW4 5
}XX 
elseYY 
ifYY 
(YY 
levelsCountYY 
<YY  !
	ConstantsYY" +
.YY+ ,
LevelsLimitModel5YY, =
)YY= >
{ZZ 
queue[[ 
.[[ 
Dequeue[[ 
([[ 
)[[ 
;[[  
father\\ 
=\\" #
queue\\$ )
.\\) *
Peek\\* .
(\\. /
)\\/ 0
;\\0 1
childrenCount]] 
=]]" #
$num]]$ %
;]]% &
user^^ 
.^^ 
FatherModel5^^ !
=^^" #
father^^$ *
.^^* +
AffiliateId^^+ 6
;^^6 7
user__ 
.__ 
	PositionX__ 
=__" #
childrenCount__$ 1
;__1 2
user`` 
.`` 
	PositionY`` 
=``" #
father``$ *
.``* +
Level``+ 0
+``1 2
$num``3 4
;``4 5
useraa 
.aa 
Levelaa 
=aa" #
fatheraa$ *
.aa* +
Levelaa+ 0
+aa1 2
$numaa3 4
;aa4 5
levelsCountbb 
++bb 
;bb 
}cc 
elsedd 
returnee 
orderedUsersee #
;ee# $
queuegg 
.gg 
Enqueuegg 
(gg 
usergg 
)gg 
;gg  
}hh 	
returnjj 
orderedUsersjj 
;jj 
}kk 
publicll 

staticll 
Listll 
<ll 
LeaderBoardModel6ll (
>ll( )
OrderModel6ll* 5
(ll5 6
thisll6 :
IEnumerablell; F
<llF G
LeaderBoardModel6llG X
>llX Y
usersllZ _
)ll_ `
{mm 
varnn 
orderedUsersnn 
=nn 
usersnn  
.oo 
OrderByDescendingoo 
(oo 
uoo  
=>oo! #
uoo$ %
.oo% &
Amountoo& ,
)oo, -
.pp 
ThenBypp 
(pp 
upp 
=>pp 
upp 
.pp 
UserCreatedAtpp (
)pp( )
.qq 
ToListqq 
(qq 
)qq 
;qq 
varss 
queuess 
=ss 
newss 
Queuess  %
<ss% &
LeaderBoardModel6ss& 7
>ss7 8
(ss8 9
)ss9 :
;ss: ;
vartt 
childrenCounttt 
=tt 
$numtt 
;tt 
varuu 
levelsCountuu 
=uu 
$numuu 
;uu 
ifww 

(ww 
orderedUsersww 
.ww 
Countww 
>ww  
$numww! "
)ww" #
{xx 	
varyy 
	firstUseryy 
=yy 
orderedUsersyy (
[yy( )
$numyy) *
]yy* +
;yy+ ,
	firstUserzz 
.zz 
	PositionXzz 
=zz  !
$numzz" #
;zz# $
	firstUser{{ 
.{{ 
	PositionY{{ 
={{  !
$num{{" #
;{{# $
	firstUser|| 
.|| 
Level|| 
=||  !
$num||" #
;||# $
queue}} 
.}} 
Enqueue}} 
(}} 
	firstUser}} #
)}}# $
;}}$ %
}~~ 	
for
ÄÄ 
(
ÄÄ 
var
ÄÄ 
i
ÄÄ 
=
ÄÄ 
$num
ÄÄ 
;
ÄÄ 
i
ÄÄ 
<
ÄÄ 
orderedUsers
ÄÄ (
.
ÄÄ( )
Count
ÄÄ) .
;
ÄÄ. /
i
ÄÄ0 1
++
ÄÄ1 3
)
ÄÄ3 4
{
ÅÅ 	
var
ÇÇ 
user
ÇÇ 
=
ÇÇ 
orderedUsers
ÇÇ %
[
ÇÇ% &
i
ÇÇ& '
]
ÇÇ' (
;
ÇÇ( )
var
ÉÉ 
father
ÉÉ 
=
ÉÉ 
queue
ÉÉ 
.
ÉÉ 
Peek
ÉÉ #
(
ÉÉ# $
)
ÉÉ$ %
;
ÉÉ% &
if
ÖÖ 
(
ÖÖ 
childrenCount
ÖÖ 
<
ÖÖ 
	Constants
ÖÖ  )
.
ÖÖ) *!
ChildrenLimitModel6
ÖÖ* =
)
ÖÖ= >
{
ÜÜ 
childrenCount
áá 
++
áá 
;
áá  
user
àà 
.
àà 
FatherModel6
àà !
=
àà" #
father
àà$ *
.
àà* +
AffiliateId
àà+ 6
;
àà6 7
user
ââ 
.
ââ 
	PositionX
ââ 
=
ââ" #
childrenCount
ââ$ 1
;
ââ1 2
user
ää 
.
ää 
	PositionY
ää 
=
ää" #
father
ää$ *
.
ää* +
Level
ää+ 0
+
ää1 2
$num
ää3 4
;
ää4 5
user
ãã 
.
ãã 
Level
ãã 
=
ãã" #
father
ãã$ *
.
ãã* +
Level
ãã+ 0
+
ãã1 2
$num
ãã3 4
;
ãã4 5
}
åå 
else
çç 
if
çç 
(
çç 
levelsCount
çç 
<
çç  !
	Constants
çç" +
.
çç+ ,
LevelsLimitModel6
çç, =
)
çç= >
{
éé 
queue
èè 
.
èè 
Dequeue
èè 
(
èè 
)
èè 
;
èè  
father
êê 
=
êê" #
queue
êê$ )
.
êê) *
Peek
êê* .
(
êê. /
)
êê/ 0
;
êê0 1
childrenCount
ëë 
=
ëë" #
$num
ëë$ %
;
ëë% &
user
íí 
.
íí 
FatherModel6
íí !
=
íí" #
father
íí$ *
.
íí* +
AffiliateId
íí+ 6
;
íí6 7
user
ìì 
.
ìì 
	PositionX
ìì 
=
ìì" #
childrenCount
ìì$ 1
;
ìì1 2
user
îî 
.
îî 
	PositionY
îî 
=
îî" #
father
îî$ *
.
îî* +
Level
îî+ 0
+
îî1 2
$num
îî3 4
;
îî4 5
user
ïï 
.
ïï 
Level
ïï 
=
ïï" #
father
ïï$ *
.
ïï* +
Level
ïï+ 0
+
ïï1 2
$num
ïï3 4
;
ïï4 5
levelsCount
ññ 
++
ññ 
;
ññ 
}
óó 
else
òò 
return
ôô 
orderedUsers
ôô #
;
ôô# $
queue
õõ 
.
õõ 
Enqueue
õõ 
(
õõ 
user
õõ 
)
õõ 
;
õõ  
}
úú 	
return
ûû 
orderedUsers
ûû 
;
ûû 
}
üü 
}°° Ê
IC:\HeroSystem\walletService\WalletService.Utility\Extensions\SqlHelper.cs
	namespace 	
WalletService
 
. 
Utility 
.  

Extensions  *
;* +
public 
static 
class 
	SqlHelper 
{ 
private		 
static		 
dynamic		 
	ToExpando		 $
(		$ %
IDataRecord		% 0
record		1 7
)		7 8
{

 
var 
expandoObject 
= 
new 
ExpandoObject  -
(- .
). /
as0 2
IDictionary3 >
<> ?
string? E
,E F
objectG M
?M N
>N O
;O P
for 
( 
var 
i 
= 
$num 
; 
i 
< 
record "
." #

FieldCount# -
;- .
i/ 0
++0 2
)2 3
{ 	
var 
value 
= 
record 
[ 
i  
]  !
==" $
DBNull% +
.+ ,
Value, 1
?2 3
null4 8
:8 9
record: @
[@ A
iA B
]B C
;C D
expandoObject 
. 
Add 
( 
record $
.$ %
GetName% ,
(, -
i- .
). /
,/ 0
value1 6
)6 7
;7 8
} 	
return 
expandoObject 
; 
} 
private 
static 
IEnumerable 
< 
IDictionary *
<* +
string+ 1
,1 2
object3 9
>9 :
>: ;
Read< @
(@ A
DbDataReaderA M
readerN T
)T U
{ 
while 
( 
reader 
. 
Read 
( 
) 
) 
{ 	
yield 
return 
	ToExpando "
(" #
reader# )
)) *
as+ -
IDictionary. 9
<9 :
string: @
,@ A
objectB H
>H I
;I J
} 	
} 
public 

static 
List 
< 
IDictionary "
<" #
string# )
,) *
object+ 1
>1 2
>2 3
ToDynamicList4 A
(A B
thisB F
DbDataReaderG S
readerT Z
)Z [
{ 
var   
dd   
=   
Read   
(   
reader   
)   
;   
return!! 
dd!! 
.!! 
ToList!! 
(!! 
)!! 
;!! 
}"" 
}## 